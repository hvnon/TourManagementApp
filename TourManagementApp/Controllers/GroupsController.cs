using System; using System.Net; using System.Web.Mvc;  using DAL.Entities; using BIZ;  namespace TourManagementApp.Controllers {     public class GroupsController : Controller     {                 GroupBIZ groupBIZ = new GroupBIZ();         CustomerGroupBIZ customerGroupBIZ = new CustomerGroupBIZ();          public ActionResult Index(FormCollection form)         {             var groupList = groupBIZ.GetAll();             DateTime fromDate = new DateTime(1995, 1, 1);             DateTime toDate = DateTime.Now;              if (!string.IsNullOrWhiteSpace(Request.Form["fromDate"]))             {                 var tempDate = Request.Form["fromDate"].ToString();                 TimeSpan time = new TimeSpan(0, 0, 0);                 fromDate = DateTime.Parse(tempDate).Add(time);                 // add hour and minute to the end of date             }             if (!string.IsNullOrWhiteSpace(Request.Form["toDate"]))             {                 var tempDate = Request.Form["toDate"].ToString();                 TimeSpan time = new TimeSpan(23, 59, 59);                 toDate = DateTime.Parse(tempDate).Add(time);                 // add hour and minute to the end of date             }             try             {                 if (Request.Form["resetGroupForm"] != null)
                {
                    return RedirectToAction("Index");
                }                  if (Request.Form["findGroup"] != null)                 {                     string groupCode = form["groupCode"].ToString().Trim();                     string groupName = form["groupName"].ToString().Trim();                      var query = groupBIZ.Find(groupCode, groupName,fromDate,toDate);                                           return View(query);                  }                 else                 {                     return View(groupList);                 }              }             catch             {                 return View(groupList);             }         }          public ActionResult Details(int? id)         {             if (id == null)             {                 return new HttpStatusCodeResult(HttpStatusCode.BadRequest);             }              Group group = groupBIZ.GetByID((int)id);              ViewBag.group = group;               if (group == null)             {                 return HttpNotFound();             }             return View(customerGroupBIZ.GetByGroupID(group.ID));         }
    } } 